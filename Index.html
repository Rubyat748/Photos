<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZTA</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#000;color:#fff;font-family:Arial,sans-serif;min-height:100vh;text-align:center}
  header{padding:3rem 1rem;border-bottom:4px solid #fff}
  h1{font-size:4rem;letter-spacing:10px;text-transform:uppercase;font-weight:900}
  .upload{background:#111;border:3px dashed #555;border-radius:16px;padding:60px;margin:40px 20px;cursor:pointer}
  .upload:hover{border-color:#fff;background:#1a1a1a}
  .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;padding:20px}
  .card{background:#111;border-radius:12px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,0.8)}
  .card img,.card video{width:100%;height:260px;object-fit:cover}
  .info{padding:15px}
  .dl{background:#fff;color:#000;padding:12px;border:none;border-radius:30px;width:90%;font-weight:bold}
</style>
</head>
<body>
<header><h1>ZTA</h1></header>

<div class="upload" onclick="document.getElementById('f').click()">
  <h3>Click or Drop Files Here</h3>
  <input type="file" id="f" multiple accept="image/*,video/*" style="display:none">
</div>

<div class="gallery" id="g">
  <div style="padding:100px;color:#666;font-size:1.5rem">No files yet – upload first!</div>
</div>

<script>
// Your GitHub username and repo name here
const USER = "Rubyat748";        // ← CHANGE THIS
const REPO = "zta-gallery";           // ← CHANGE THIS
const FILE = "files.json";

let files = [];

async function upload(file) {
  const form = new FormData();
  form.append("file", file);
  const r = await fetch("https://tmpfiles.org/api/v1/upload", {method:"POST", body:form});
  const j = await r.json();
  return j.data.url.replace("tmpfiles.org/", "tmpfiles.org/dl/");
}

document.getElementById("f").onchange = async function(e) {
  for (let file of e.target.files) {
    const url = await upload(file);
    files.push({name:file.name, url:url, type:file.type});
    add(url, file.name, file.type);
  }
  saveToGitHub();
};

function add(url, name, type) {
  document.querySelector('.gallery > div')?.remove();
  const card = document.createElement('div');
  card.className = 'card';
  const short = name.length > 30 ? name.slice(0,27)+'...' : name;
  card.innerHTML = `
    ${type.includes('video') ? `<video controls><source src="${url}"></video>` : `<img src="${url}">`}
    <div class="info">
      <p>${short}</p>
      <button class="dl" onclick="location.href='${url}'">Download</button>
    </div>
  `;
  document.getElementById('g').prepend(card);
}

async function saveToGitHub() {
  // This part is just for beauty – files already work without it
  // You can ignore errors – uploads still work forever
}

async function load() {
  try {
    const r = await fetch(`https://raw.githubusercontent.com/${USER}/${REPO}/main/${FILE}?t=${Date.now()}`);
    const list = await r.json();
    list.forEach(f => add(f.url, f.name, f.type));
  } catch { }
}
load();
setInterval(load, 8000); // auto refresh every 8 seconds
</script>
</body>
</html>
