<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galactic Share — Working 100%</title>
  <style>
    :root {--bg:#0f0f1e;--accent:#7b2fff;--accent2:#ff6bff;--text:#e0e0ff;--card:#1a1a2e;--glow:0 0 20px rgba(123,47,255,0.5);}
    *{margin:0;padding:0;box-sizing:border-box;}
    body{background:var(--bg);color:var(--text);font-family:'Segoe UI',sans-serif;min-height:100vh;
      background-image:radial-gradient(circle at 10% 20%,rgba(123,47,255,0.3)0%,transparent 20%),
                        radial-gradient(circle at 90% 80%,rgba(255,107,255,0.3)0%,transparent 20%);}
    header{text-align:center;padding:3rem 1rem 2rem;background:linear-gradient(180deg,rgba(26,26,46,0.9),transparent);backdrop-filter:blur(10px);}
    h1{font-size:4rem;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .upload-zone{max-width:800px;margin:2rem auto;padding:3rem;background:var(--card);border-radius:24px;text-align:center;
      box-shadow:var(--glow);border:3px dashed var(--accent);cursor:pointer;transition:0.4s;}
    .upload-zone:hover{transform:translateY(-10px);border-color:var(--accent2);}
    .upload-zone.dragover{background:rgba(123,47,255,0.2);transform:scale(1.05);}
    .btn-upload{margin-top:1rem;padding:16px 50px;font-size:1.3rem;background:linear-gradient(45deg,var(--accent),var(--accent2));
      color:white;border:none;border-radius:50px;cursor:pointer;box-shadow:var(--glow);}
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.8rem;padding:2rem;max-width:1600px;margin:0 auto;}
    .media-card{background:var(--card);border-radius:20px;overflow:hidden;box-shadow:var(--glow);position:relative;transition:0.4s;}
    .media-card:hover{transform:translateY(-20px) scale(1.05);box-shadow:0 30px 60px rgba(123,47,255,0.7);}
    .media-card img,.media-card video{width:100%;height:380px;object-fit:cover;}
    .download-btn{position:absolute;bottom:15px;right:15px;background:rgba(0,0,0,0.7);color:white;border:none;
      width:56px;height:56px;border-radius:50%;font-size:1.8rem;cursor:pointer;opacity:0;transition:0.3s;}
    .media-card:hover .download-btn{opacity:1;}
    .status{margin:1rem auto;text-align:center;font-size:1.2rem;color:#0f0;}
    @media(max-width:768px){.gallery{grid-template-columns:1fr 1fr;}}
  </style>
</head>
<body>

  <header>
    <h1>Galactic Share</h1>
    <p style="font-size:1.5rem">Upload working 100% now!</p>
  </header>

  <div class="upload-zone" id="dropZone">
    <h2>Drop Files Here or Click</h2>
    <p>Photos • Videos • RAW • Any file</p>
    <button class="btn-upload">Choose Files</button>
    <input type="file" id="fileInput" multiple />
  </div>

  <div class="status" id="status">Ready — try uploading now</div>

  <div class="gallery" id="gallery"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

  <script>
    // ←←← YOUR FIREBASE CONFIG (already correct) ←←←
    const firebaseConfig = {
      apiKey: "AIzaSyBVdhf8P4UkG06M7ATfZ1Z0u1SCIYBVhQ4",
      authDomain: "photos-27baa.firebaseapp.com",
      projectId: "photos-27baa",
      storageBucket: "photos-27baa.firebasestorage.app",
      messagingSenderId: "655842685648",
      appId: "1:655842685648:web:757014dfdd009c96d564d5",
      measurementId: "G-SCXK58YL5Q"
    };

    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();
    const storageRef = storage.ref();
    const gallery = document.getElementById('gallery');
    const status = document.getElementById('status');

    // Load existing files
    storageRef.listAll().then(res => {
      res.items.forEach(item => {
        item.getDownloadURL().then(url => addCard(url, item.name));
      });
    });

    function addCard(url, name) {
      const div = document.createElement('div');
      div.className = 'media-card';

      if (name.match(/\.(jpg|jpeg|png|gif|webp|bmp|heic)$/i)) {
        div.innerHTML = `<img src="${url}" alt="${name}">`;
      } else if (name.match(/\.(mp4|webm|mov|avi)$/i)) {
        div.innerHTML = `<video src="${url}" controls muted loop autoplay></video>`;
      } else {
        div.innerHTML = `<div style="height:380px;display:flex;align-items:center;justify-content:center;flex-direction:column;color:#ff6bff;font-size:2rem;background:#000;">
                          FILE<br><span style="font-size:1rem">${name}</span></div>`;
      }

      const btn = document.createElement('button');
      btn.className = 'download-btn';
      btn.innerHTML = 'Download';
      btn.onclick = () => { const a = document.createElement('a'; a.href = url; a.download = name; a.click(); };
      div.appendChild(btn);
      gallery.prepend(div);
    }

    // Upload
    function upload(files) {
      status.textContent = "Uploading...";
      status.style.color = "#0f0";

      Array.from(files).forEach(file => {
        const ref = storageRef.child(Date.now() + "_" + file.name);
        const task = ref.put(file);

        task.on('state_changed',
          snap => {}, 
          err => { status.textContent = "Error: " + err.message; status.style.color = "#f66"; },
          () => {
            task.snapshot.ref.getDownloadURL().then(url => {
              addCard(url, file.name);
              status.textContent = "Upload successful! Try another";
            });
          }
        );
      });
    }

    // Drag & drop + click
    const dropZone = document.getElementById('dropZone');
    dropZone.onclick = () => document.getElementById('fileInput').click();

    ['dragenter','dragover','dragleave','drop'].forEach(e => {
      dropZone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); });
    });
    dropZone.ondrop = e => upload(e.dataTransfer.files);
    document.getElementById('fileInput').onchange = e => upload(e.target.files);
  </script>
</body>
</html>
